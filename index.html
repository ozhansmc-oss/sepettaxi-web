<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>SepetTaxi</title>
<meta name="theme-color" content="#f5c400" />

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
*{box-sizing:border-box}
html,body{
  margin:0;height:100%;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  background:#050506;color:#fff;overflow:hidden;
}
:root{
  --y:#f5c400;
  --panel:#0f0f10;
  --card:#141416;
  --line:rgba(255,255,255,.10);
  --mut:rgba(255,255,255,.6);
}

/* ===== LANDING ===== */
#landing{
  position:fixed;inset:0;z-index:50;
  background:#000 url("assets/landing.png") center/cover no-repeat;
  display:flex;align-items:center;justify-content:center;
  animation:fadeOut 1.2s ease forwards;
  animation-delay:1.1s;
}
@keyframes fadeOut{to{opacity:0;pointer-events:none}}

/* ===== APP SHELL ===== */
#app{position:fixed;inset:0;display:flex;flex-direction:column}

/* TOP BAR */
#topbar{
  height:56px;display:flex;align-items:center;justify-content:space-between;
  padding:0 14px;border-bottom:1px solid var(--line);
  background:linear-gradient(180deg,#0b0b0c,#080809);
}
#topbar .logo{font-weight:800;font-size:18px}
#topbar .logo span{color:var(--y)}
#topbar .icon{opacity:.85}

/* ===== MAP + UI STATES ===== */
#stage{
  position:relative;flex:1;overflow:hidden;
}
#mapWrap{
  position:absolute;left:0;right:0;top:0;
  height:50%;transition:height .28s ease;
}
#stage.focus #mapWrap{height:40%}

#map{width:100%;height:100%}

/* ===== BOTTOM UI ===== */
#ui{
  position:absolute;left:0;right:0;bottom:0;
  height:50%;transition:height .28s ease;
  background:linear-gradient(180deg,rgba(5,5,6,.85),rgba(5,5,6,.98));
  border-top:1px solid var(--line);
  padding:12px;
}
#stage.focus #ui{height:60%}

.card{
  background:var(--card);border:1px solid var(--line);
  border-radius:14px;padding:12px;margin-bottom:10px;
}

/* SERVICE SEGMENT */
.segment{display:flex;gap:10px}
.seg{
  flex:1;padding:12px;border-radius:12px;text-align:center;
  background:#0c0c0d;border:1px solid var(--line);opacity:.6;
}
.seg.active{
  opacity:1;border-color:rgba(245,196,0,.6);
  box-shadow:0 0 0 1px rgba(245,196,0,.35),0 0 18px rgba(245,196,0,.15);
}
.seg b{display:block}

/* ADDRESS */
.addr{display:flex;align-items:center;gap:10px;color:#ddd}
.addr .dot{width:8px;height:8px;border-radius:50%;background:var(--y)}
.addr .ph{color:var(--mut)}

/* STATS */
.stats{display:flex;gap:10px}
.stat{
  flex:1;text-align:center;border-radius:12px;
  background:#0c0c0d;border:1px solid var(--line);padding:10px;
}
.stat .v{font-size:20px;font-weight:800}

/* CTA */
#cta{
  margin-top:auto;
  background:linear-gradient(180deg,#ffd84d,#f5c400);
  color:#000;border:none;border-radius:16px;
  height:54px;font-size:18px;font-weight:900;
}

/* MAP OVERLAY SCROLL CATCHER */
#mapScrollCatcher{
  position:absolute;inset:0;z-index:5;
}
</style>
</head>

<body>
<div id="landing"></div>

<div id="app">
  <div id="topbar">
    <div class="icon">â˜°</div>
    <div class="logo">Sepet<span>Taxi</span></div>
    <div class="icon">ðŸ””</div>
  </div>

  <div id="stage">
    <div id="mapWrap">
      <div id="map"></div>
      <!-- scroll sadece harita Ã¼stÃ¼nde -->
      <div id="mapScrollCatcher"></div>
    </div>

    <div id="ui">
      <div class="card segment">
        <div class="seg active" id="segTaxi"><b>Taksi</b><small>HÄ±zlÄ± ulaÅŸÄ±m</small></div>
        <div class="seg" id="segCourier"><b>Kurye</b><small>HÄ±zlÄ± teslimat</small></div>
      </div>

      <div class="card">
        <div class="addr"><div class="dot"></div><div class="ph">Nereden</div></div>
        <hr style="border:0;border-top:1px solid var(--line);margin:10px 0">
        <div class="addr"><div class="dot" style="background:#8bc34a"></div><div class="ph">Nereye</div></div>
      </div>

      <div class="stats">
        <div class="stat"><div class="v">â€” km</div><small class="ph">Mesafe</small></div>
        <div class="stat"><div class="v">â€” TL</div><small class="ph">Ãœcret</small></div>
      </div>

      <button id="cta">Taksi Ã‡aÄŸÄ±r</button>
    </div>
  </div>
</div>

<script>
/* ===== MAP INIT ===== */
const map = L.map('map',{zoomControl:false}).setView([41.0369,28.9850],13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  attribution:''
}).addTo(map);

/* ===== SERVICE SWITCH ===== */
const segTaxi=document.getElementById('segTaxi');
const segCourier=document.getElementById('segCourier');
const cta=document.getElementById('cta');

function setService(s){
  if(s==='taxi'){
    segTaxi.classList.add('active');
    segCourier.classList.remove('active');
    cta.textContent='Taksi Ã‡aÄŸÄ±r';
  }else{
    segCourier.classList.add('active');
    segTaxi.classList.remove('active');
    cta.textContent='Kurye Ã‡aÄŸÄ±r';
  }
}
segTaxi.onclick=()=>setService('taxi');
segCourier.onclick=()=>setService('courier');

/* ===== 2-STATE SCROLL (HARÄ°TA ÃœZERÄ°) ===== */
const stage=document.getElementById('stage');
let focused=false;
const catcher=document.getElementById('mapScrollCatcher');

catcher.addEventListener('wheel',e=>{
  e.preventDefault();
  if(e.deltaY>0 && !focused){
    focused=true;stage.classList.add('focus');
    setTimeout(()=>map.invalidateSize(),300);
  }
  if(e.deltaY<0 && focused){
    focused=false;stage.classList.remove('focus');
    setTimeout(()=>map.invalidateSize(),300);
  }
},{passive:false});

/* MOBILE SWIPE */
let sy=0;
catcher.addEventListener('touchstart',e=>sy=e.touches[0].clientY,{passive:true});
catcher.addEventListener('touchmove',e=>{
  const dy=e.touches[0].clientY-sy;
  if(dy<-20 && !focused){
    focused=true;stage.classList.add('focus');
    setTimeout(()=>map.invalidateSize(),300);
  }
  if(dy>20 && focused){
    focused=false;stage.classList.remove('focus');
    setTimeout(()=>map.invalidateSize(),300);
  }
},{passive:true});
</script>
</body>
</html>
