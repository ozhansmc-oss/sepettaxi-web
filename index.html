<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>SepetTaxi</title>

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
:root{
  --bg:#0b0f14;
  --fg:#ffffff;
  --muted:#9aa4b2;
  --line:rgba(255,255,255,.12);
  --card:rgba(15,22,32,.92);
  --yellow:#f7c600;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  overflow:hidden; /* SCROLL KİLİTLİ */
}

/* SCREEN */
.screen{
  position:fixed;
  inset:0;
  display:none;
}
.screen.active{display:flex}

/* ========== LANDING (KİLİTLİ) ========== */
#landing{
  width:100%;
  height:100%;
  background:url("./assets/landing.png") center center / cover no-repeat;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  padding:20px;
}

#landing button{
  width:min(520px,100%);
  height:56px;
  border-radius:20px;
  border:none;
  font-size:16px;
  font-weight:900;
  background:#fff;
  color:#000;
  cursor:pointer;
}

/* ========== MAIN APP ========== */
#app{
  width:100%;
  height:100%;
  display:flex;
  flex-direction:column;
}

/* MAP */
#map{
  flex:1;
}

/* PANEL */
.panel{
  background:rgba(11,15,20,.85);
  backdrop-filter:blur(10px);
  border-top:1px solid var(--line);
  padding:12px;
}

.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:18px;
  padding:12px;
}

.services{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-bottom:10px;
}

.service{
  padding:14px;
  border-radius:16px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.05);
  text-align:center;
  font-weight:700;
  cursor:pointer;
}

.service.active{
  border-color:var(--yellow);
  background:rgba(247,198,0,.15);
}

.inputs{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-bottom:10px;
}

.inputs input{
  width:100%;
  padding:10px;
  border-radius:14px;
  border:1px solid var(--line);
  background:rgba(0,0,0,.3);
  color:#fff;
}

.stats{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-bottom:10px;
}

.stat{
  border:1px solid var(--line);
  border-radius:14px;
  padding:10px;
}

.callBtn{
  width:100%;
  height:52px;
  border-radius:18px;
  border:none;
  font-size:16px;
  font-weight:900;
  background:#fff;
  color:#000;
  cursor:pointer;
}

.callBtn:disabled{
  opacity:.4;
  cursor:not-allowed;
}
</style>
</head>
<body>

<!-- LANDING -->
<section id="scrLanding" class="screen active">
  <div id="landing">
    <button id="btnStart">Başla</button>
  </div>
</section>

<!-- MAIN -->
<section id="scrMain" class="screen">
  <div id="app">
    <div id="map"></div>

    <div class="panel">
      <div class="card">

        <div class="services">
          <div class="service" id="svcTaxi">Taksi</div>
          <div class="service" id="svcCourier">Kurye</div>
        </div>

        <div class="inputs">
          <input id="fromAddr" placeholder="Nereden">
          <input id="toAddr" placeholder="Nereye">
        </div>

        <div class="stats">
          <div class="stat" id="dist">Mesafe: -</div>
          <div class="stat" id="price">Ücret: -</div>
        </div>

        <button class="callBtn" id="btnCall" disabled>Çağır</button>

      </div>
    </div>
  </div>
</section>

<script>
let map;
let selectedService=null;

const scrLanding=document.getElementById("scrLanding");
const scrMain=document.getElementById("scrMain");

document.getElementById("btnStart").onclick=()=>{
  scrLanding.classList.remove("active");
  scrMain.classList.add("active");
  initMap();
};

function initMap(){
  map=L.map("map").setView([40.195,29.060],13);
  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);

  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(pos=>{
      const {latitude,longitude}=pos.coords;
      map.setView([latitude,longitude],15);
      document.getElementById("fromAddr").value="Mevcut Konum";
    });
  }
}

function selectService(type){
  selectedService=type;
  document.getElementById("svcTaxi").classList.toggle("active",type==="taxi");
  document.getElementById("svcCourier").classList.toggle("active",type==="courier");
  document.getElementById("btnCall").textContent=
    type==="taxi"?"Taksi Çağır":"Kurye Çağır";
  document.getElementById("btnCall").disabled=false;
}

document.getElementById("svcTaxi").onclick=()=>selectService("taxi");
document.getElementById("svcCourier").onclick=()=>selectService("courier");
</script>

</body>
</html>
