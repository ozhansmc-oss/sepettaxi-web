<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">

<title>SepetTaxi</title>
<meta name="theme-color" content="#000000">

<link rel="manifest" href="manifest.json">
<link rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script src="config.js"></script>
<script src="log.js"></script>

<style>
*{box-sizing:border-box}
html,body{
  margin:0;height:100%;
  font-family:Arial,Helvetica,sans-serif;
  background:#000;color:#fff;overflow:hidden
}
:root{
  --y:#f5c400;
  --panel:#0f0f0f;
  --line:#222;
}

/* ===== LAYOUT ===== */
#app{
  height:100%;
  display:flex;
  flex-direction:column;
}

/* ===== MAP ===== */
#map{
  height:50%;
  position:relative;
  z-index:1;
}

/* ===== HAMBURGER ===== */
#hamburger{
  position:fixed;
  top:12px;right:12px;
  width:44px;height:44px;
  background:#000;
  border:1px solid var(--line);
  border-radius:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  z-index:1000;
}
#menu{
  position:fixed;
  top:0;right:0;
  width:260px;height:100%;
  background:#000;
  border-left:1px solid var(--line);
  padding:20px;
  transform:translateX(100%);
  transition:.25s;
  z-index:999;
}
#menu.open{transform:translateX(0)}
#menu a{
  display:block;
  padding:14px 0;
  color:#fff;
  text-decoration:none;
  border-bottom:1px solid var(--line);
}

/* ===== DRIVER MINI CARD ===== */
#driverMini{
  position:fixed;
  top:12px;left:12px;
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:14px;
  padding:8px 12px;
  font-size:13px;
  z-index:1000;
}

/* ===== BOTTOM SHEET ===== */
#sheet{
  height:50%;
  background:var(--panel);
  border-top:1px solid var(--line);
  padding:14px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

/* ===== CARDS ===== */
.cards{
  display:flex;
  gap:10px;
}
.card{
  flex:1;
  background:#000;
  border:1px solid var(--line);
  border-radius:16px;
  padding:14px;
  text-align:center;
  font-weight:900;
}
.card.active{
  border-color:var(--y);
  color:var(--y);
}

/* ===== INFO BAR ===== */
#info{
  display:flex;
  justify-content:space-between;
  font-size:14px;
  padding:10px;
  border:1px solid var(--line);
  border-radius:14px;
}

/* ===== CTA ===== */
#cta{
  padding:16px;
  border-radius:18px;
  background:var(--y);
  color:#000;
  text-align:center;
  font-weight:900;
}

/* ===== ICONS ===== */
.taxiIcon, .motoIcon{
  width:28px;height:28px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:16px;
}
.taxiIcon{background:#f5c400;color:#000}
.motoIcon{background:#fff;color:#000}

</style>
</head>

<body>

<div id="app">

  <div id="map"></div>

  <div id="hamburger">‚ò∞</div>

  <div id="driverMini">S√ºr√ºc√º Ol</div>

  <div id="menu">
    <a href="#">Hesabƒ±m</a>
    <a href="driver-register.html">S√ºr√ºc√º Ol</a>
    <a href="driver.html">S√ºr√ºc√º Giri≈üi</a>
    <a href="#">Destek</a>
  </div>

  <div id="sheet">
    <div class="cards">
      <div id="cardTaxi" class="card active">üöï Taksi</div>
      <div id="cardCourier" class="card">üèç Kurye</div>
    </div>

    <div id="info">
      <div>Mesafe: ‚Äî km</div>
      <div>√úcret: ‚Äî TL</div>
    </div>

    <div id="cta">Taksi √áaƒüƒ±r</div>
  </div>

</div>

<script>
/* ===== MENU ===== */
const menu=document.getElementById("menu");
document.getElementById("hamburger").onclick=()=>{
  menu.classList.toggle("open");
};

/* ===== MAP ===== */
const map=L.map("map",{
  zoomControl:false
}).setView([39,35],6);

L.tileLayer(
  "https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",
  {maxZoom:19}
).addTo(map);

/* ===== USER LOCATION ===== */
navigator.geolocation.getCurrentPosition(pos=>{
  const lat=pos.coords.latitude;
  const lng=pos.coords.longitude;
  map.setView([lat,lng],15);

  L.circleMarker([lat,lng],{
    radius:8,color:"#f5c400",fillOpacity:.9
  }).addTo(map);

  spawnVehicles(lat,lng);
},{enableHighAccuracy:true});

/* ===== VEHICLE SIMULATION ===== */
function spawnVehicles(lat,lng){
  for(let i=0;i<4;i++){
    L.marker(
      [lat+(Math.random()-.5)/200,lng+(Math.random()-.5)/200],
      {icon:L.divIcon({className:"taxiIcon",html:"üöï"})}
    ).addTo(map);
    L.marker(
      [lat+(Math.random()-.5)/200,lng+(Math.random()-.5)/200],
      {icon:L.divIcon({className:"motoIcon",html:"üèç"})}
    ).addTo(map);
  }
}

/* ===== CARD TOGGLE ===== */
const taxi=document.getElementById("cardTaxi");
const courier=document.getElementById("cardCourier");
const cta=document.getElementById("cta");

taxi.onclick=()=>{
  taxi.classList.add("active");
  courier.classList.remove("active");
  cta.textContent="Taksi √áaƒüƒ±r";
};
courier.onclick=()=>{
  courier.classList.add("active");
  taxi.classList.remove("active");
  cta.textContent="Kurye √áaƒüƒ±r";
};

/* ===== PWA ===== */
if("serviceWorker"in navigator){
  navigator.serviceWorker.register("/service-worker.js");
}
</script>

</body>
</html>
