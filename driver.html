<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"/><title>Driver</title></head>
<body>
<h2>Uygun Çağrılar</h2>
<div id="jobs"></div>

<script>
const API_URL="https://script.google.com/macros/s/AKfycbxmjbl9o0881xyp8EV4IgKFI72GDpAw8GtT4OS-uOnMzkGloQn8C_C6A9q5mMIEsBSy/exec";
fetch(API_URL+"?action=getJobs&status=pending")
.then(r=>r.json())
.then(js=>{
 jobs.innerHTML="";
 js.forEach(j=>{
  jobs.innerHTML+=`
   <div>
    ${j.service_type} - ${j.job_id}
    <button onclick="accept('${j.job_id}')">Kabul Et</button>
   </div>`;
 });
});
function accept(id){
 fetch(API_URL,{
  method:"POST",
  body:JSON.stringify({action:"updateStatus",job_id:id,status:"accepted",driver_id:"DRV-001"})
 });
 alert("Kabul edildi");
}
</script>
</body>
</html>
