<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<title>CanlÄ± Takip</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
</head>
<body>
<div id="map" style="height:100vh"></div>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
const API_URL="PASTE_APPS_SCRIPT_URL_HERE";
const params=new URLSearchParams(location.search);
const job_id=params.get("job_id");
const map=L.map('map').setView([40.195,29.060],13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
let marker=L.marker([40.195,29.060]).addTo(map);
setInterval(()=>{
 fetch(API_URL+"?action=getJob&id="+job_id)
 .then(r=>r.json())
 .then(j=>{
  if(j.driver_lat)marker.setLatLng([j.driver_lat,j.driver_lng]);
 });
},5000);
</script>
</body>
</html>
